#!/usr/bin/env node

'use strict';

var lister = require("../index");

var dirs = [],
    settings = {};
var doSort = false;

for (var i = 2; i < process.argv.length; i++) {
    var arg = process.argv[i];
    if (arg === "-d") {
        settings.maxDepth = parseInt(process.argv[++i]);
        if (isNaN(settings.maxDepth)) {
            settings.maxDepth = undefined;
        }
    } else if (arg === "-s") {
        doSort = true;
    } else {
        dirs.push(arg);
    }
}

lister.listFiles(dirs, settings, function(error, items) {
	if(error) {
		return console.log(error);
	}

    if (doSort) {
        items.sort();
    }
    items.forEach(function(item) {
    	console.log(item);
    });
});